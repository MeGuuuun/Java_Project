import java.io.DataOutputStream;
import java.io.File;
import java.io.FileWriter;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.StringTokenizer;

public class AddUserInfo {
	Socket socket;
	StringTokenizer st;
	File dataFile = new File("/Users/jiminpark/Desktop/채팅 프로그램_중간 대체/ChatServer/users.txt"); //파일 생성자엔 경로 적기 (상대경로)
	
	AddUserInfo(Socket _s, String _m){
		Socket socket = _s;
		String msg = _m;
		st = new StringTokenizer(msg,"!");
		String tag = st.nextToken();
		String id = st.nextToken();
		String pass = st.nextToken();
		String name = st.nextToken();
		String number = st.nextToken();
		
		String join_confimTag="JOIN_OK";
		String failedTag = "FAILED";
		
		OutputStream os;
		DataOutputStream dos;
		
		try {
			PrintWriter pw = new PrintWriter(new FileWriter(dataFile));
			String info = id+"!"+pass+"!"+name+"!"+number+"\r";
			pw.println(info);
			
			os = socket.getOutputStream();
			dos = new DataOutputStream(os);
			
			dos.writeUTF(join_confimTag);
			
			pw.close();
			
			
		}catch(Exception e) {
			System.out.println("Server > 회원가입 정보 저장 실패 ");
			
		}
	}
}
