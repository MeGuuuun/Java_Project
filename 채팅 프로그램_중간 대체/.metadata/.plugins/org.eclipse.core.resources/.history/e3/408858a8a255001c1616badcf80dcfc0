import java.net.*;
import java.io.*;
import java.util.*;

public class SocketChecker {
	Socket socket;
	Server server;
	String uName;
	List<String> users = new ArrayList<>();
	
	String connectTag = "CONNECTED";
	String unconnectTag = "UNCONNECTED";
	
	SocketChecker(Socket _s, Server _ss){
		socket = _s;
		server = _ss;
	
	if(socket.isClosed()) {
		for(int i=0;i<server.clients.size();i++) {
			if(uName.equals(users.get(i))) {
				users.remove(uName);
			}
		}
		
		try {
			OutputStream os = socket.getOutputStream();
			DataOutputStream dos = new DataOutputStream(os);
			
			dos.writeUTF(unconnectTag+users);
		}catch(Exception e) {
			System.out.println("Server > 소켓 접속 확인 전송 실패 ");
		}
	}else {
		users.add(uName);
		try {
			OutputStream os = socket.getOutputStream();
			DataOutputStream dos = new DataOutputStream(os);
			
			dos.writeUTF(connectTag+users);
		}catch(Exception e) {
			System.out.println("Server > 소켓 접속 확인 전송 실패 ");
		}
	}
	
	}
}
